<!DOCTYPE html>
<html lang="en">
  {% load static %}

  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Set Password</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" />
    <link rel="stylesheet" type="text/css" href="{% static 'assets/css/styles.min.css' %}" />

    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      body {
        /* background: url("./Media/Login/blue-curve-background.webp") no-repeat center;
              background-size: cover; */
        background-color: #975ef838;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
      }
      
      .form-section {
        display: flex;
        height: 450px;
        width: 800px;
        margin: auto;
        border: 1px solid #fff;
        /* margin-top: 70px; */
        box-shadow: 0px 4px 8px #0000001f;
      }
      .form-group {
        display: flex;
        flex-direction: column;
        width: 40%;
        height: 100%;
        /* align-items: center; */
        background-color: white;
        padding: 25px;
      }
      
      .form-group h2 {
        margin: 20px 0px;
      }
      
      .form-floating label {
        padding-left: 0px;
      }
      .form-floating input {
        font-size: 16px;
        border: none;
        border-radius: 0;
        outline: none;
        display: block;
        background-color: #fff;
        border-bottom: 1px solid #000;
      }
      .login-email-btn {
        position: absolute;
        bottom: 5px;
        right: 5px;
        background: none;
        border: none;
        color: #00b0ef;
      }
      .login-button {
        padding: 5px;
        width: 100%;
        margin-top: 15px;
        background: none;
        border: none;
        background: #00b0ef;
        border-radius: 2rem;
        font-size: 18px;
        font-weight: 500;
      }
      
      .form-group a {
        text-decoration: none;
        color: #000;
        font-weight: 500;
        font-size: 13px;
      }
      .side {
        display: flex;
        justify-content: center;
        text-align: center;
        width: 60%;
        background-color: #fff;
      }
      .side img {
        width: 450px;
        height: 450px;
      }
      .forgot-link {
        text-align: end;
      }
    </style>
  </head>

  <body>
    <div class="container p-0">
      <div class="form-section">
        <div class="side">
          <img src="{% static 'assets/images/login-concept-illustration.webp' %}" alt="logo" />
        </div>
        <form method="post" class="form-group">
          {% csrf_token %}
          <h2>Reset Password</h2>
          <div class="form-floating mb-3">
            <input type="password" class="form-control" id="oldpassword" name="oldpassword" placeholder="Old Password" oninput="password_validate('oldpassword');" />
            <span toggle="#oldpassword" class="fa fa-fw fa-eye-slash field-icon toggle-password"></span>
            <span id="oldpassword_error" style="color:red;"></span>
            <label for="oldpassword">Enter old password <span class="text-danger">*</span> </label>
          </div>
          <div class="form-floating mb-3">
            <input type="password" class="form-control" id="newpassword" name="newpassword" placeholder="New Password" oninput="password_validate('newpassword');" />
            <span toggle="#newpassword" class="fa fa-fw fa-eye-slash field-icon toggle-password"></span>
            <span id="newpassword_error" style="color:red;"></span>
            <label for="newpassword">Enter new password <span class="text-danger">*</span> </label>
          </div>
          <div class="form-floating mb-3">
            <input type="password" class="form-control" id="confirmpassword" name="confirmpassword" placeholder="Confirm Password" oninput="password_validate('confirmpassword');" />
            <span toggle="#confirmpassword" class="fa fa-fw fa-eye-slash field-icon toggle-password"></span>
            <span id="confirmpassword_error" style="color:red;"></span>
            <label for="confirmpassword">Confirm Password <span class="text-danger">*</span> </label>
          </div>

          <div class="d-flex justify-content-center mt-5">
            <button onclick="return validation();" type="submit" class="btn btn-primary login-btn">Submit</button>
            <div class="forgot-link"></div>
          </div>
        </form>
      </div>
    </div>

    <script src="{% static 'js/resetpassword.js' %}"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
    <script src="{% static 'js/index.js' %} "></script>

    <script>
      function IsValid(value) {
        if (value == '' || value == null || value == undefined) {
          return true
        } else {
          return false
        }
      }
      
      function validation() {
        var oldpassword = $('#oldpassword').val()
        var newpassword = $('#newpassword').val()
        var confirmpassword = $('#confirmpassword').val()
        if (IsValid(oldpassword)) {
          $('#oldpassword').html()
          $('#oldpassword_error').show().delay(3000).slideUp()
          $('#oldpassword_error').html('Old password is required')
          $('#oldpassword').focus()
          return false
        }
        if (IsValid(newpassword)) {
          $('#newpassword').html()
          $('#newpassword_error').show().delay(3000).slideUp()
          $('#newpassword_error').html('New password is required')
          $('#newpassword').focus()
          return false
        }
      
        if (password_validate('newpassword') == false) {
          $('#newpassword').html()
          $('#newpassword_error').show().delay(3000).slideUp()
          $('#newpassword_error').html('Please enter  valid new password ')
          $('#newpassword').focus()
          return false
        }
        if (IsValid(confirmpassword)) {
          $('#confirmpassword').html()
          $('#confirmpassword_error').show().delay(3000).slideUp()
          $('#confirmpassword_error').html('Confirm password is required')
          $('#confirmpassword').focus()
          return false
        }
        if (password_validate('confirmpassword') == false) {
          $('#confirmpassword').html()
          $('#confirmpassword_error').show().delay(3000).slideUp()
          $('#confirmpassword_error').html('Please enter valid confirm password ')
          $('#confirmpassword').focus()
          return false
        }
      
        if (newpassword != confirmpassword) {
          $('#confirmpassword').html()
          $('#confirmpassword_error').show().delay(3000).slideUp()
          $('#confirmpassword_error').html('New password and Confirm password does not match.')
          $('#confirmpassword').focus()
          return false
        }
      }
    </script>

    {% if messages %}
      <div class="alert admin-alert">
        {% for message in messages %}
          {% comment %} <div class="notice notice-{{ message.tags }}">
            <strong class="msg-{{ message.tags }}">Message</strong> {{ message }}
          </div> {% endcomment %}

          <script>
            var m = '{{ message }}'
            var ic = '{{ message.tags }}'
            Swal.fire({
              icon: ic,
              text: m,
              timer: 1500 ,
            })
          </script>
        {% endfor %}
      </div>
    {% endif %}
  </body>
</html>
