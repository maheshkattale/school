{% extends 'index.html' %} {% load static %} {% block head %}
<link rel="stylesheet" href="{% static 'css/dashboard.css' %}">


{% endblock %} 
{% block heading %}
  <span class="tab-title"><span class="px-1">Dashboard</span></span>
{% endblock %} 
{% block body %}
<div class="row">
  <div class="col-lg-12">
    <div class="row">
      <div class="col-lg-8">
        <div class="d-flex justify-content-between">
          <div class="bg-lg-blue dashboard_count_cards">
            <img class="hexagon bg_blue_cover p-4"
              src="{% static 'assets/images/backgrounds/message.svg' %}"
              alt=""
              width="100"
              height="100"
            />
            <div class="dashboard_count_heading">Messages</div>
            <div class="dashboard_count_numbers">102</div>
          </div>
          <div class="bg-lg-purple dashboard_count_cards">
            <img class="hexagon bg_purple_cover"
              src="{% static 'assets/images/backgrounds/student.svg ' %}"
              alt=""
              width="100"
              height="100"
            />
            <div class="dashboard_count_heading">Todays Periods</div>
            <div class="dashboard_count_numbers">10</div>
          </div>
          <div class="bg-lg-pink dashboard_count_cards">
            <img class="hexagon bg_red_cover p-4"
              src="{% static 'assets/images/backgrounds/calender.svg' %}"
              alt=""
              width="100"
              height="100"
            />
            <div class="dashboard_count_heading">Monthly Holiday</div>
            <div class="dashboard_count_numbers">0</div>
          </div>

        </div>
        <div class="d-flex justify-content-between">
          <div class="w-68 chart-container">
            <canvas id="myChart"></canvas>
          </div>
          <div class="w-30 chart-container">
            <canvas id="myPieChart"></canvas>
          </div>
        </div>
      </div>
      <div class="col-lg-4">
        <div class="row">
          <div class="col-lg-12">
            <div id="calendarContainer" class="calendar-container"></div>
          </div>
          <div class="col-lg-12">
            <div>
              <div class="pt-2">
                <h5>Notice Board</h5>
              </div>
              {% for i in announcements %}

              <div class="notice-row row">
                <div class="col-lg-4 p-0">
                  <div class="imgdiv">
                    <img
                      class="w-100 imgclass"
                      src="{%static 'assets/images/products/s1.JPG ' %}"
                      alt=""
                    />
                  </div>
                </div>
                <div class="col-lg-8">
                  <div class="notice-div">
                    <div class="notice-title">Announcement</div>
                    <div class="notice-title">{{i.Announcementtext}}</div>
                    <div class="notice-by pt-2">{{i.Date}}</div>
                  </div>
                </div>
              </div>

              {% endfor %}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %} {% block script %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
  $(document).ready(function () {});
  // Data
  const categories = [
    "2017",
    "2018",
    "2019",
    "2020",
    "2021",
    "2022",
    "2023",
    "2024",
  ];
  const values = [80, 70, 30, 90, 80, 70, 60, 100];

  // Create bar chart
  const ctx = document.getElementById("myChart").getContext("2d");
  const gradient = ctx.createLinearGradient(0, 0, 0, 400); // Create gradient from top to bottom
  gradient.addColorStop(0, "rgba(255, 255, 255, 1)"); // Start color
  gradient.addColorStop(1, "rgba(224, 224, 224, 1)"); // End color

  const myChart = new Chart(ctx, {
    type: "bar",
    data: {
      labels: categories,
      datasets: [
        {
          label: "Values",
          data: values,
          backgroundColor: [
            "rgba(255, 99, 132, 1)",
            "rgba(54, 162, 235, 1)",
            "rgba(255, 206, 86, 1)",
            "rgba(75, 192, 192, 1)",
          ],
          borderColor: [
            "rgba(255, 99, 132, 1)",
            "rgba(54, 162, 235, 1)",
            "rgba(255, 206, 86, 1)",
            "rgba(75, 192, 192, 1)",
          ],
          borderWidth: 1,
          borderSkipped: "bottom", // Only apply border to the bottom of the bars
        },
      ],
    },
    options: {
      animation: {
        duration: 2000,
        easing: "easeInOutQuad",
      },
      scales: {
        y: {
          beginAtZero: true,
          ticks: {
            stepSize: 5,
          },
        },
      },
      plugins: {
        title: {
          display: true,
          text: "School Statistics",
          font: {
            size: 18,
          },
        },
        legend: {
          display: false,
        },
        // Add linear gradient background
        background: {
          color: gradient,
        },
      },
    },
  });
</script>
<script>
  // Data
  const labels = ["Category A", "Category B", "Category C", "Category D"];
  const data = [30, 20, 40, 10];
  const backgroundColors = [
    "rgba(255, 99, 132, 0.5)",
    "rgba(54, 162, 235, 0.5)",
    "rgba(255, 206, 86, 0.5)",
    "rgba(75, 192, 192, 0.5)",
  ];

  // Create pie chart
  const pieCtx = document.getElementById("myPieChart").getContext("2d");
  const myPieChart = new Chart(pieCtx, {
    type: "pie",
    data: {
      labels: labels,
      datasets: [
        {
          data: data,
          backgroundColor: backgroundColors,
          borderWidth: 1,
        },
      ],
    },
    options: {
      animation: {
        duration: 2000,
        easing: "easeInOutQuad",
      },
      plugins: {
        title: {
          display: true,
          text: "Course Activities",
          font: {
            size: 18,
          },
        },
        legend: {
          position: "right",
        },
      },
    },
  });
</script>

<script>
  function createCalendar(containerId, year, month) {
    const container = document.getElementById(containerId);
    const currentDate = new Date(year, month - 1); // month is 0-based
    const daysInMonth = new Date(year, month, 0).getDate();
    const startingDay = new Date(year, month - 1, 1).getDay(); // 0-based index

    // Clear container
    container.innerHTML = "";

    // Create header
    const header = document.createElement("div");
    header.classList.add("calendar-header");
    container.appendChild(header);

    const prevMonthBtn = document.createElement("button");
    prevMonthBtn.innerHTML = '<i class="fa-solid fa-arrow-left"></i>';
    prevMonthBtn.addEventListener("click", () => {
      createCalendar(
        containerId,
        currentDate.getFullYear(),
        currentDate.getMonth()
      );
    });
    header.appendChild(prevMonthBtn);

    const headerTitle = document.createElement("h2");
    headerTitle.textContent = currentDate.toLocaleString("default", {
      month: "long",
      year: "numeric",
    });
    header.appendChild(headerTitle);

    const nextMonthBtn = document.createElement("button");
    nextMonthBtn.innerHTML = '<i class="fa-solid fa-arrow-right"></i>';
    nextMonthBtn.addEventListener("click", () => {
      createCalendar(
        containerId,
        currentDate.getFullYear(),
        currentDate.getMonth() + 2
      );
    });
    header.appendChild(nextMonthBtn);

    // Create days
    const daysContainer = document.createElement("div");
    daysContainer.classList.add("calendar-days");
    container.appendChild(daysContainer);

    // Add day names
    const dayNames = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];
    dayNames.forEach((day) => {
      const dayElement = document.createElement("div");
      dayElement.classList.add("calendar-day");
      dayElement.textContent = day;
      daysContainer.appendChild(dayElement);
    });

    // Add empty cells for the starting day
    for (let i = 0; i < startingDay; i++) {
      const emptyCell = document.createElement("div");
      emptyCell.classList.add("calendar-day");
      daysContainer.appendChild(emptyCell);
    }

    // Add days
    for (let i = 1; i <= daysInMonth; i++) {
      const dayElement = document.createElement("div");
      dayElement.classList.add("calendar-day");
      dayElement.textContent = i;
      if (currentDate.getDate() === i) {
        dayElement.classList.add("today");
      }
      dayElement.addEventListener("click", () => {
        const selectedDay = new Date(year, month - 1, i);
        selectDate(selectedDay);
      });
      daysContainer.appendChild(dayElement);
    }
  }

  function selectDate(date) {
    const selectedDate = date.toLocaleDateString("default", {
      weekday: "long",
      year: "numeric",
      month: "long",
      day: "numeric",
    });
    alert(`Selected date: ${selectedDate}`);
  }

  // Usage
  const currentDate = new Date();
  createCalendar(
    "calendarContainer",
    currentDate.getFullYear(),
    currentDate.getMonth() + 1
  ); // Current year, Current month
</script>
{% endblock %}
